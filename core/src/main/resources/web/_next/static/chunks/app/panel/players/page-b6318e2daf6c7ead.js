(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8130],{16103:(e,t,a)=>{"use strict";a.d(t,{B6:()=>l,CB:()=>m,EW:()=>h,HQ:()=>o,Hy:()=>r,Q4:()=>u,_L:()=>c,lE:()=>x,zf:()=>d});var s=a(56671),n=a(31886),i=a(53999);async function r(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{await (0,n.ow)("/api/players/op?uuid=".concat(e)),t&&s.oR.success("成功给予该玩家OP权限")}catch(e){(0,n.Kf)(e,"无法给予该玩家OP权限",[[400,"请求参数错误"],[401,"未登录"]])}}async function l(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{await (0,n.ow)("/api/players/deop?uuid=".concat(e)),t&&s.oR.success("成功解除该玩家OP权限")}catch(e){(0,n.Kf)(e,"无法解除该玩家OP权限",[[400,"请求参数错误"],[401,"未登录"]])}}async function o(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,n.ow)("/api/players/kick?uuid=".concat(e,"&r=").concat(t)),a&&s.oR.success("已踢出该玩家")}catch(e){(0,n.Kf)(e,"无法踢出该玩家",[[400,"请求参数错误"],[401,"未登录"],[403,"该玩家不在线"]])}}async function c(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,n.ow)("/api/players/ban?uuid=".concat(e,"&r=").concat(t)),a&&s.oR.success("已封禁该玩家")}catch(e){(0,n.Kf)(e,"无法封禁该玩家",[[400,"请求参数错误"],[401,"未登录"]])}}async function d(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{await (0,n.ow)("/api/players/pardon?uuid=".concat(e)),t&&s.oR.success("已解封该玩家")}catch(e){(0,n.Kf)(e,"无法解封该玩家",[[400,"请求参数错误"],[401,"未登录"]])}}async function u(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,n.ow)("/api/players/gamemode?uuid=".concat(e,"&gm=").concat(t)),a&&s.oR.success("已将该玩家的游戏模式设置为"+(0,i.Cq)(t))}catch(e){(0,n.Kf)(e,"无法设置该玩家的游戏模式",[[400,"请求参数错误"],[401,"未登录"]])}}async function x(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];try{await (0,n.ow)("/api/whitelist/".concat(e?"enable":"disable")),t&&s.oR.success("已".concat(e?"启用":"禁用","白名单"))}catch(t){(0,n.Kf)(t,"无法".concat(e?"启用":"禁用","白名单"),[[401,"未登录"],[500,"服务器内部错误"]])}}async function h(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,n.ow)("/api/whitelist/add?name=".concat(e,"&uuid=").concat(t)),a&&s.oR.success("已将该玩家加入白名单")}catch(e){(0,n.Kf)(e,"无法将该玩家加入白名单",[[400,"请求参数错误"],[401,"未登录"],[500,"服务器内部错误"]])}}async function m(e,t){let a=!(arguments.length>2)||void 0===arguments[2]||arguments[2];try{await (0,n.ow)("/api/whitelist/remove?name=".concat(e,"&uuid=").concat(t)),a&&s.oR.success("已将该玩家移出白名单")}catch(e){(0,n.Kf)(e,"无法将该玩家移出白名单",[[400,"请求参数错误"],[401,"未登录"],[500,"服务器内部错误"]])}}},19832:(e,t,a)=>{"use strict";a.d(t,{P:()=>n});var s=a(19087);let n=new(a.n(s)())},22726:(e,t,a)=>{"use strict";a.d(t,{b:()=>p});var s=a(95155),n=a(12115),i=a(52278),r=a(42355),l=a(13052),o=a(12767),c=a(36268),d=a(11032),u=a(88524),x=a(53999),h=a(97168),m=a(74466);a(76037);let f=(0,m.F)("flex w-fit items-stretch [&>*]:focus-visible:z-10 [&>*]:focus-visible:relative [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md has-[>[data-slot=button-group]]:gap-2",{variants:{orientation:{horizontal:"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none",vertical:"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none"}},defaultVariants:{orientation:"horizontal"}});function g(e){let{className:t,orientation:a,...n}=e;return(0,s.jsx)("div",{role:"group","data-slot":"button-group","data-orientation":a,className:(0,x.cn)(f({orientation:a}),t),...n})}function p(e){var t;let{columns:a,data:m,pagination:f=!1,fallbackMessage:p="暂无数据",className:j}=e,[v,b]=(0,n.useState)({pageIndex:0,pageSize:10}),w=(0,c.N4)({columns:a,data:m,getCoreRowModel:(0,d.HT)(),getPaginationRowModel:f?(0,d.kW)():void 0,onPaginationChange:b,state:{pagination:v}});return(0,s.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,s.jsx)("div",{className:(0,x.cn)(j,"border rounded-md"),children:(0,s.jsxs)(u.XI,{children:[(0,s.jsx)(u.A0,{children:w.getHeaderGroups().map(e=>(0,s.jsx)(u.Hj,{children:e.headers.map(e=>(0,s.jsx)(u.nd,{children:e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,s.jsx)(u.BF,{children:(null==(t=w.getRowModel().rows)?void 0:t.length)?w.getRowModel().rows.map(e=>(0,s.jsx)(u.Hj,{children:e.getVisibleCells().map(e=>(0,s.jsx)(u.nA,{children:(0,c.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,s.jsx)(u.Hj,{className:"hover:bg-transparent",children:(0,s.jsx)(u.nA,{colSpan:a.length,className:"h-24 text-center",children:p})})})]})}),f&&(0,s.jsxs)("div",{className:"flex gap-3 items-center max-md:flex-col",children:[(0,s.jsxs)("div",{className:"flex gap-3 items-center [&_button]:cursor-pointer",children:[(0,s.jsx)(h.$,{variant:"outline",size:"icon",title:"跳转至第一页",onClick:()=>w.firstPage(),disabled:!w.getCanPreviousPage(),children:(0,s.jsx)(i.A,{})}),(0,s.jsxs)(g,{children:[(0,s.jsxs)(h.$,{variant:"outline",onClick:()=>w.previousPage(),disabled:!w.getCanPreviousPage(),children:[(0,s.jsx)(r.A,{}),"上一页"]}),(0,s.jsxs)(h.$,{variant:"outline",onClick:()=>w.nextPage(),disabled:!w.getCanNextPage(),children:["下一页",(0,s.jsx)(l.A,{})]})]}),(0,s.jsx)(h.$,{variant:"outline",size:"icon",title:"跳转至最后一页",onClick:()=>w.lastPage(),disabled:!w.getCanNextPage(),children:(0,s.jsx)(o.A,{})})]}),(0,s.jsxs)("span",{className:"text-muted-foreground text-sm",children:["第 ",v.pageIndex+1," 页 / 共 ",w.getPageCount()," 页"]})]})]})}},30347:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>U});var s=a(95155),n=a(12115),i=a(17580),r=a(47924),l=a(17881),o=a(42996),c=a(30064),d=a(53999);function u(e){let{className:t,...a}=e;return(0,s.jsx)(c.bL,{"data-slot":"tabs",className:(0,d.cn)("flex flex-col gap-2",t),...a})}function x(e){let{className:t,...a}=e;return(0,s.jsx)(c.B8,{"data-slot":"tabs-list",className:(0,d.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",t),...a})}function h(e){let{className:t,...a}=e;return(0,s.jsx)(c.l9,{"data-slot":"tabs-trigger",className:(0,d.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)(c.UC,{"data-slot":"tabs-content",className:(0,d.cn)("flex-1 outline-none",t),...a})}var f=a(22726),g=a(31886),p=a(5196),j=a(75494),v=a(12318),b=a(97092),w=a(6877),y=a(28113),N=a(37777),C=a(97168),k=a(99840),z=a(82714),P=a(89852);function A(e){let{title:t,description:a,label:i,placeholder:r,onAction:l,asChild:o,children:c}=e,d=(0,n.useRef)(null);return(0,s.jsxs)(k.lG,{children:[(0,s.jsx)(k.zM,{asChild:o,children:c}),(0,s.jsxs)(k.Cf,{children:[(0,s.jsxs)(k.c7,{children:[(0,s.jsx)(k.L3,{children:t}),a&&(0,s.jsx)(k.rr,{children:a})]}),(0,s.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,s.jsx)(z.J,{children:i}),(0,s.jsx)(P.p,{placeholder:r,ref:d})]}),(0,s.jsxs)(k.Es,{children:[(0,s.jsx)(k.HM,{asChild:!0,children:(0,s.jsx)(C.$,{variant:"outline",children:"取消"})}),(0,s.jsx)(k.HM,{asChild:!0,children:(0,s.jsx)(C.$,{onClick:()=>{d.current&&l&&l(d.current.value)},children:"确定"})})]})]})]})}var O=a(88145);function _(e){let{isOnline:t,className:a}=e;return(0,s.jsxs)(O.E,{variant:"outline",children:[(0,s.jsx)("div",{className:(0,d.cn)("w-2 h-2 rounded-full",t?"bg-green-600":"bg-muted-foreground",a)}),t?"在线":"离线"]})}var K=a(16103),S=a(62177),$=a(48778),L=a(71153),R=a(41085),E=a(30070),M=a(23291),W=a(91503);function F(e){let{uuid:t}=e,a=(0,n.useRef)(null);return(0,n.useEffect)(()=>{a.current&&new W.A({canvas:a.current,skin:g.Hh+t,cape:g.v_+t})},[t]),(0,s.jsx)("canvas",{ref:a})}var H=a(95784),I=a(90088),V=a(19832);let B=L.z.object({gamemode:L.z.enum(Object.values(M.U)),isOp:L.z.boolean()});function J(e){var t;let{player:a,children:n,asChild:i}=e,r=(0,S.mN)({resolver:(0,$.u)(B),values:{gamemode:null!=(t=a.gamemode)?t:"adventure",isOp:a.isOp}}),l=async e=>{e.gamemode!==a.gamemode&&await (0,K.Q4)(a.uuid,e.gamemode,!1),e.isOp!==a.isOp&&(a.isOp?await (0,K.B6)(a.uuid,!1):await (0,K.Hy)(a.uuid,!1)),V.P.emit("refresh-data")};return(0,s.jsxs)(R.cj,{children:[(0,s.jsx)(R.CG,{asChild:i,children:n}),(0,s.jsx)(R.h,{children:(0,s.jsx)(E.lV,{...r,children:(0,s.jsxs)("form",{className:"flex-1 flex flex-col",onSubmit:r.handleSubmit(l),children:[(0,s.jsxs)(R.Fm,{children:[(0,s.jsx)(R.qp,{children:"编辑玩家"}),(0,s.jsx)(R.Qs,{children:"在此设置和管理该玩家的状态和角色。"})]}),(0,s.jsxs)("div",{className:"flex-1 px-4 flex flex-col gap-5",children:[(0,s.jsx)(F,{uuid:a.uuid}),(0,s.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,s.jsx)(_,{isOnline:a.isOnline}),(0,s.jsx)("h2",{className:"inline-block text-lg font-semibold",children:a.name})]}),(0,s.jsx)(E.zB,{control:r.control,name:"gamemode",render:e=>{let{field:t}=e;return(0,s.jsxs)(E.eI,{children:[(0,s.jsx)(E.lR,{children:"游戏模式"}),(0,s.jsx)(E.MJ,{children:(0,s.jsxs)(H.l6,{...t,onValueChange:t.onChange,children:[(0,s.jsx)(H.bq,{className:"w-full",children:(0,s.jsx)(H.yv,{})}),(0,s.jsxs)(H.gC,{children:[(0,s.jsx)(H.eb,{value:"adventure",children:"冒险"}),(0,s.jsx)(H.eb,{value:"survival",children:"生存"}),(0,s.jsx)(H.eb,{value:"creative",children:"创造"}),(0,s.jsx)(H.eb,{value:"spectator",children:"旁观"})]})]})}),(0,s.jsx)(E.C5,{})]})}}),(0,s.jsx)(E.zB,{control:r.control,name:"isOp",render:e=>{let{field:t}=e;return(0,s.jsxs)(E.eI,{className:"flex justify-between",children:[(0,s.jsx)(E.lR,{children:"OP权限"}),(0,s.jsx)(E.MJ,{children:(0,s.jsx)(I.d,{...t,value:"",defaultChecked:a.isOp,onCheckedChange:t.onChange})}),(0,s.jsx)(E.C5,{})]})}}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)(z.J,{children:"管理"}),(0,s.jsxs)("div",{className:"grid grid-rows-2 grid-cols-2 gap-2 [&>*]:cursor-pointer",children:[void 0!==a.isWhitelisted&&(a.isWhitelisted?(0,s.jsxs)(C.$,{variant:"outline",onClick:async()=>{await (0,K.CB)(a.name,a.uuid),V.P.emit("refresh-data")},children:[(0,s.jsx)(j.A,{}),"移出白名单"]}):(0,s.jsxs)(C.$,{variant:"outline",onClick:async()=>{await (0,K.EW)(a.name,a.uuid),V.P.emit("refresh-data")},children:[(0,s.jsx)(v.A,{}),"加入白名单"]})),(0,s.jsx)(A,{title:"踢出玩家",description:"将玩家踢出服务器，之后玩家可重新加入服务器",label:"原因",placeholder:"请输入踢出原因...",onAction:async e=>{await (0,K.HQ)(a.uuid,e),V.P.emit("refresh-data")},asChild:!0,children:(0,s.jsxs)(C.$,{variant:"outline",className:void 0===a.isWhitelisted?"col-start-1":"col-start-2",disabled:!a.isOnline,children:[(0,s.jsx)(b.A,{}),"踢出服务器"]})}),a.isBanned?(0,s.jsxs)(C.$,{variant:"outline",className:void 0===a.isWhitelisted?"col-start-2":"col-span-2",onClick:async()=>{await (0,K.zf)(a.uuid),V.P.emit("refresh-data")},children:[(0,s.jsx)(y.A,{}),"解除封禁"]}):(0,s.jsx)(A,{title:"封禁玩家",description:"将玩家踢出服务器并加入封禁列表，之后玩家将不可重新加入服务器",label:"原因",placeholder:"请输入封禁原因...",onAction:async e=>{await (0,K._L)(a.uuid,e),V.P.emit("refresh-data")},asChild:!0,children:(0,s.jsxs)(C.$,{variant:"destructive",className:void 0===a.isWhitelisted?"col-start-2":"col-span-2",children:[(0,s.jsx)(w.A,{}),"封禁玩家"]})})]})]})]}),(0,s.jsxs)(R.XW,{children:[(0,s.jsx)(R.kN,{asChild:!0,children:(0,s.jsx)(C.$,{type:"submit",className:"cursor-pointer",children:"确定"})}),(0,s.jsx)(R.kN,{asChild:!0,children:(0,s.jsx)(C.$,{variant:"outline",className:"cursor-pointer",children:"取消"})})]})]})})})]})}let q=[{accessorKey:"name",header:"玩家名",cell:e=>{let{row:t}=e,{name:a,uuid:n}=t.original;return(0,s.jsxs)(N.m_,{children:[(0,s.jsx)(N.k$,{children:(0,s.jsx)(J,{player:t.original,asChild:!0,children:(0,s.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("img",{src:g.nF+n,alt:a,width:17,height:17}),(0,s.jsx)("span",{className:"font-semibold",children:a})]})})}),(0,s.jsx)(N.ZI,{children:n})]})}},{accessorKey:"isOnline",header:()=>(0,s.jsx)("div",{className:"text-center",children:"状态"}),cell:e=>{let{row:t}=e,{isOnline:a}=t.original;return(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(_,{isOnline:a})})}},{accessorKey:"uuid",header:"",cell:""},{accessorKey:"gamemode",header:()=>(0,s.jsx)("div",{className:"text-center",children:"游戏模式"}),cell:e=>{let{row:t}=e,{gamemode:a}=t.original;return a?(0,s.jsx)("div",{className:"text-center",children:(0,d.Cq)(a)}):(0,s.jsx)(s.Fragment,{})}},{accessorKey:"isWhitelisted",header:()=>(0,s.jsx)("div",{className:"text-center",children:"白名单"}),cell:e=>{let{row:t,column:a}=e;return(0,n.useEffect)(()=>{a.toggleVisibility(void 0!==t.original.isWhitelisted)},[t,a]),(0,s.jsx)("div",{className:"flex justify-center",children:t.original.isWhitelisted?(0,s.jsx)(p.A,{size:18,color:"var(--color-muted-foreground)"}):(0,s.jsx)(s.Fragment,{})})}},{accessorKey:"isOp",header:()=>(0,s.jsx)("div",{className:"text-center",children:"OP"}),cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"flex justify-center",children:t.original.isOp?(0,s.jsx)(p.A,{size:18,color:"var(--color-muted-foreground)"}):(0,s.jsx)(s.Fragment,{})})}},{header:" ",cell:e=>{let{row:t}=e,{name:a,uuid:n,isOnline:i,isWhitelisted:r}=t.original;return(0,s.jsxs)("div",{className:"flex justify-end [&>*]:h-4 [&>*]:cursor-pointer [&>*]:hover:!bg-transparent",children:[void 0!==r&&(r?(0,s.jsx)(C.$,{variant:"ghost",size:"icon",title:"移出白名单",onClick:async()=>{await (0,K.CB)(a,n),V.P.emit("refresh-data")},children:(0,s.jsx)(j.A,{})}):(0,s.jsx)(C.$,{variant:"ghost",size:"icon",title:"加入白名单",onClick:async()=>{await (0,K.EW)(a,n),V.P.emit("refresh-data")},children:(0,s.jsx)(v.A,{})})),i&&(0,s.jsx)(A,{title:"踢出玩家",description:"将玩家踢出服务器，之后玩家可重新加入服务器",label:"原因",placeholder:"请输入踢出原因...",onAction:async e=>{await (0,K.HQ)(n,e),V.P.emit("refresh-data")},asChild:!0,children:(0,s.jsx)(C.$,{variant:"ghost",size:"icon",title:"踢出服务器",children:(0,s.jsx)(b.A,{})})}),(0,s.jsx)(A,{title:"封禁玩家",description:"将玩家踢出服务器并加入封禁列表，之后玩家将不可重新加入服务器",label:"原因",placeholder:"请输入封禁原因...",onAction:async e=>{await (0,K._L)(n,e),V.P.emit("refresh-data")},asChild:!0,children:(0,s.jsx)(C.$,{variant:"ghost",size:"icon",title:"封禁玩家",children:(0,s.jsx)(w.A,{className:"stroke-red-400"})})})]})}}],G=[{accessorKey:"name",header:"玩家名",cell:e=>{let{row:t}=e,{name:a,uuid:n}=t.original;return(0,s.jsxs)(N.m_,{children:[(0,s.jsx)(N.k$,{children:(0,s.jsx)(J,{player:t.original,asChild:!0,children:(0,s.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",children:[(0,s.jsx)("img",{src:g.nF+n,alt:a,width:17,height:17}),(0,s.jsx)("span",{className:"font-semibold",children:a})]})})}),(0,s.jsx)(N.ZI,{children:n})]})}},{accessorKey:"banReason",header:"封禁原因"},{accessorKey:"uuid",header:"",cell:""},{accessorKey:"isOp",header:()=>(0,s.jsx)("div",{className:"text-center",children:"OP"}),cell:e=>{let{row:t}=e;return(0,s.jsx)("div",{className:"flex justify-center",children:t.original.isOp?(0,s.jsx)(p.A,{size:18,color:"var(--color-muted-foreground)"}):(0,s.jsx)(s.Fragment,{})})}},{header:" ",cell:e=>{let{row:t}=e;return(0,s.jsx)(C.$,{variant:"ghost",size:"icon",className:"float-right h-4 cursor-pointer hover:!bg-transparent",title:"解除封禁",onClick:async()=>{await (0,K.zf)(t.original.uuid),V.P.emit("refresh-data")},children:(0,s.jsx)(y.A,{className:"stroke-green-600"})})}}];var Q=a(24232),T=a(86801),D=a(28042),X=a(52815);function U(){let[e,t]=(0,n.useState)([]),[a,c]=(0,n.useState)(0),[d,p]=(0,n.useState)(!1),[j,v]=(0,n.useState)("player-list"),[b,w]=(0,n.useState)(""),y=(0,n.useMemo)(()=>e.filter(e=>{let{isBanned:t}=e;return!t}),[e]),N=(0,n.useMemo)(()=>e.filter(e=>{let{isBanned:t}=e;return t}),[e]),k=async()=>{try{let e=await (0,g.qV)("/api/players"),a=e.players.sort((e,t)=>e.name.localeCompare(t.name));t(a),c(e.maxPlayerCount),p(e.whitelist)}catch(e){(0,g.Kf)(e,"无法获取玩家列表",[[400,"请求参数错误"],[401,"未登录"],[500,"服务器内部错误"]])}};return(0,n.useEffect)(()=>{k(),V.P.on("refresh-data",()=>k())},[]),(0,s.jsxs)(Q.SubPage,{title:"玩家",subTitle:"player-list"===j?"玩家列表":"封禁列表",icon:(0,s.jsx)(i.A,{}),className:"flex flex-col gap-3",children:[(0,s.jsx)("span",{className:"text-sm text-muted-foreground",children:"点击玩家名以进行更多操作。"}),(0,s.jsxs)(u,{defaultValue:(0,X.mt)("state.players.tab"),onValueChange:e=>{v(e),(0,X.kz)("state.players.tab",e)},children:[(0,s.jsxs)("div",{className:"flex justify-between items-center max-lg:flex-col-reverse max-lg:items-start max-lg:gap-2",children:[(0,s.jsxs)(x,{className:"[&>*]:cursor-pointer",children:[(0,s.jsx)(h,{value:"player-list",children:"玩家列表 (".concat(e.filter(e=>{let{isOnline:t}=e;return t}).length," / ").concat(a,")")}),(0,s.jsx)(h,{value:"banned-list",children:"封禁列表 (".concat(e.filter(e=>{let{isBanned:t}=e;return t}).length,")")})]}),(0,s.jsxs)("div",{className:"flex gap-2 max-sm:flex-col max-sm:items-start",children:[(0,s.jsxs)(D.MG,{children:[(0,s.jsx)(D.Sq,{children:(0,s.jsx)(r.A,{})}),(0,s.jsx)(D.iV,{value:b,placeholder:"搜索玩家...",onChange:e=>w(e.target.value)})]}),d?(0,s.jsx)(T.T,{onDisableWhitelist:()=>p(!1),asChild:!0,children:(0,s.jsxs)(C.$,{variant:"outline",className:"cursor-pointer",children:[(0,s.jsx)(l.A,{}),"编辑白名单"]})}):(0,s.jsxs)(C.$,{variant:"outline",className:"cursor-pointer",onClick:async()=>{await (0,K.lE)(!0),await k(),p(!0)},children:[(0,s.jsx)(o.A,{}),"启用白名单"]})]})]}),(0,s.jsx)(m,{value:"player-list",children:(0,s.jsx)(f.b,{columns:q,data:[...y.filter(e=>{let{name:t,isOnline:a}=e;return t.toLowerCase().includes(b.toLowerCase())&&a}),...y.filter(e=>{let{name:t,isOnline:a,isOp:s}=e;return t.toLowerCase().includes(b.toLowerCase())&&!a&&s}),...y.filter(e=>{let{name:t,isOnline:a,isOp:s}=e;return t.toLowerCase().includes(b.toLowerCase())&&!a&&!s})],pagination:!0,fallbackMessage:"暂无玩家"})}),(0,s.jsx)(m,{value:"banned-list",children:(0,s.jsx)(f.b,{columns:G,data:N.filter(e=>{let{name:t}=e;return t.toLowerCase().includes(b.toLowerCase())}),pagination:!0,fallbackMessage:"暂无玩家"})})]})]})}},52815:(e,t,a)=>{"use strict";a.d(t,{FN:()=>r,Tx:()=>d,kz:()=>c,mt:()=>o});let s="opanel.settings";function n(){if(window.localStorage)return window.localStorage;throw Error("localStorage is not defined.")}let i={"dashboard.monitor-interval":2e3,"terminal.autocomplete":!0,"terminal.word-wrap":!1,"terminal.font-size":12,"terminal.max-log-lines":1e3,"terminal.log-level":"INFO","terminal.log-time":!0,"terminal.thread-name":!0,"terminal.source-name":!0,"terminal.convert-ansi-code":!0,"monaco.word-wrap":!1,"monaco.font-size":14,"state.players.tab":"player-list","state.terminal.history":[]},r={wordWrap:o("monaco.word-wrap")?"on":"off",fontSize:o("monaco.font-size")};function l(){let e;try{e=n()}catch(e){return i}let t=e.getItem(s);if(!t)return d(),i;let a=JSON.parse(null!=t?t:"{}");for(let e in i)void 0===a[e]&&(a[e]=i[e]);return e.setItem(s,JSON.stringify(a)),a}function o(e){return l()[e]}function c(e,t){let a=l();a[e]=t,n().setItem(s,JSON.stringify(a))}function d(){n().setItem(s,JSON.stringify(i))}},53571:(e,t,a)=>{Promise.resolve().then(a.bind(a,30347))},86801:(e,t,a)=>{"use strict";a.d(t,{T:()=>m});var s=a(95155),n=a(55028),i=a(12115),r=a(51362),l=a(56671),o=a(41085),c=a(97168),d=a(31886),u=a(16103),x=a(52815);let h=(0,n.default)(()=>Promise.all([a.e(4654),a.e(1376),a.e(6859),a.e(8638),a.e(4695),a.e(2674),a.e(1752)]).then(a.bind(a,11752)),{loadableGenerated:{webpack:()=>[11752]},ssr:!1});function m(e){let{onDisableWhitelist:t,children:a,asChild:n}=e,[m,f]=(0,i.useState)(""),{theme:g}=(0,r.D)(),p=async()=>{try{let e=await (0,d.qV)("/api/whitelist");f(JSON.stringify(e.whitelist,void 0,2))}catch(e){(0,d.Kf)(e,"无法获取白名单",[[401,"未登录"],[500,"服务器内部错误"]])}},j=async()=>{try{await (0,d.ow)("/api/whitelist/write",JSON.parse(m)),l.oR.success("保存成功")}catch(e){(0,d.Kf)(e,"无法保存白名单",[[401,"未登录"],[500,"服务器内部错误"]])}};return(0,s.jsxs)(o.cj,{onOpenChange:e=>e&&p(),children:[(0,s.jsx)(o.CG,{asChild:n,children:a}),(0,s.jsxs)(o.h,{children:[(0,s.jsxs)(o.Fm,{children:[(0,s.jsx)(o.qp,{children:"编辑白名单"}),(0,s.jsxs)(o.Qs,{children:["在此编辑服务器玩家白名单，你也可以直接编辑服务器目录下的",(0,s.jsx)("code",{children:"whitelist.json"}),"文件。"]})]}),(0,s.jsx)("div",{className:"flex flex-col h-full",children:m&&(0,s.jsx)(h,{defaultLanguage:"json",value:m,theme:"dark"===g?"vs-dark":"vs",options:{minimap:{enabled:!1},automaticLayout:!0,tabSize:2,...x.FN},onChange:e=>f(null!=e?e:"")})}),(0,s.jsxs)(o.XW,{children:[(0,s.jsx)(c.$,{variant:"destructive",className:"cursor-pointer",onClick:async()=>{await (0,u.lE)(!1),t&&t()},children:"禁用白名单"}),(0,s.jsx)(o.kN,{asChild:!0,children:(0,s.jsx)(c.$,{className:"cursor-pointer",onClick:()=>j(),children:"保存设置"})})]})]})]})}},88145:(e,t,a)=>{"use strict";a.d(t,{E:()=>o});var s=a(95155);a(12115);var n=a(99708),i=a(74466),r=a(53999);let l=(0,i.F)("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function o(e){let{className:t,variant:a,asChild:i=!1,...o}=e,c=i?n.DX:"span";return(0,s.jsx)(c,{"data-slot":"badge",className:(0,r.cn)(l({variant:a}),t),...o})}},88524:(e,t,a)=>{"use strict";a.d(t,{A0:()=>r,BF:()=>l,Hj:()=>o,XI:()=>i,nA:()=>d,nd:()=>c});var s=a(95155);a(12115);var n=a(53999);function i(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:(0,s.jsx)("table",{"data-slot":"table",className:(0,n.cn)("w-full caption-bottom text-sm",t),...a})})}function r(e){let{className:t,...a}=e;return(0,s.jsx)("thead",{"data-slot":"table-header",className:(0,n.cn)("[&_tr]:border-b",t),...a})}function l(e){let{className:t,...a}=e;return(0,s.jsx)("tbody",{"data-slot":"table-body",className:(0,n.cn)("[&_tr:last-child]:border-0",t),...a})}function o(e){let{className:t,...a}=e;return(0,s.jsx)("tr",{"data-slot":"table-row",className:(0,n.cn)("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",t),...a})}function c(e){let{className:t,...a}=e;return(0,s.jsx)("th",{"data-slot":"table-head",className:(0,n.cn)("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}function d(e){let{className:t,...a}=e;return(0,s.jsx)("td",{"data-slot":"table-cell",className:(0,n.cn)("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",t),...a})}},95784:(e,t,a)=>{"use strict";a.d(t,{bq:()=>u,eb:()=>h,gC:()=>x,l6:()=>c,yv:()=>d});var s=a(95155);a(12115);var n=a(14582),i=a(66474),r=a(5196),l=a(47863),o=a(53999);function c(e){let{...t}=e;return(0,s.jsx)(n.bL,{"data-slot":"select",...t})}function d(e){let{...t}=e;return(0,s.jsx)(n.WT,{"data-slot":"select-value",...t})}function u(e){let{className:t,size:a="default",children:r,...l}=e;return(0,s.jsxs)(n.l9,{"data-slot":"select-trigger","data-size":a,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...l,children:[r,(0,s.jsx)(n.In,{asChild:!0,children:(0,s.jsx)(i.A,{className:"size-4 opacity-50"})})]})}function x(e){let{className:t,children:a,position:i="popper",...r}=e;return(0,s.jsx)(n.ZL,{children:(0,s.jsxs)(n.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:i,...r,children:[(0,s.jsx)(m,{}),(0,s.jsx)(n.LM,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:a}),(0,s.jsx)(f,{})]})})}function h(e){let{className:t,children:a,...i}=e;return(0,s.jsxs)(n.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...i,children:[(0,s.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,s.jsx)(n.VF,{children:(0,s.jsx)(r.A,{className:"size-4"})})}),(0,s.jsx)(n.p4,{children:a})]})}function m(e){let{className:t,...a}=e;return(0,s.jsx)(n.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(l.A,{className:"size-4"})})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(n.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",t),...a,children:(0,s.jsx)(i.A,{className:"size-4"})})}},99840:(e,t,a)=>{"use strict";a.d(t,{Cf:()=>x,Es:()=>m,HM:()=>d,L3:()=>f,c7:()=>h,lG:()=>l,rr:()=>g,zM:()=>o});var s=a(95155);a(12115);var n=a(15452),i=a(54416),r=a(53999);function l(e){let{...t}=e;return(0,s.jsx)(n.bL,{"data-slot":"dialog",...t})}function o(e){let{...t}=e;return(0,s.jsx)(n.l9,{"data-slot":"dialog-trigger",...t})}function c(e){let{...t}=e;return(0,s.jsx)(n.ZL,{"data-slot":"dialog-portal",...t})}function d(e){let{...t}=e;return(0,s.jsx)(n.bm,{"data-slot":"dialog-close",...t})}function u(e){let{className:t,...a}=e;return(0,s.jsx)(n.hJ,{"data-slot":"dialog-overlay",className:(0,r.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function x(e){let{className:t,children:a,showCloseButton:l=!0,...o}=e;return(0,s.jsxs)(c,{"data-slot":"dialog-portal",children:[(0,s.jsx)(u,{}),(0,s.jsxs)(n.UC,{"data-slot":"dialog-content",className:(0,r.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",t),...o,children:[a,l&&(0,s.jsxs)(n.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,s.jsx)(i.A,{}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function h(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-header",className:(0,r.cn)("flex flex-col gap-2 text-center sm:text-left",t),...a})}function m(e){let{className:t,...a}=e;return(0,s.jsx)("div",{"data-slot":"dialog-footer",className:(0,r.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",t),...a})}function f(e){let{className:t,...a}=e;return(0,s.jsx)(n.hE,{"data-slot":"dialog-title",className:(0,r.cn)("text-lg leading-none font-semibold",t),...a})}function g(e){let{className:t,...a}=e;return(0,s.jsx)(n.VY,{"data-slot":"dialog-description",className:(0,r.cn)("text-muted-foreground text-sm",t),...a})}}},e=>{e.O(0,[1210,8511,5702,5452,9641,3207,6671,3464,371,5299,4407,2061,193,526,8441,5964,7358],()=>e(e.s=53571)),_N_E=e.O()}]);