(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[8130],{22726:(e,a,s)=>{"use strict";s.d(a,{b:()=>j});var t=s(95155),r=s(12115),i=s(52278),n=s(42355),l=s(13052),o=s(12767),c=s(36268),d=s(11032),u=s(88524),p=s(53999),h=s(97168),x=s(74466);s(76037);let m=(0,x.F)("flex w-fit items-stretch [&>*]:focus-visible:z-10 [&>*]:focus-visible:relative [&>[data-slot=select-trigger]:not([class*='w-'])]:w-fit [&>input]:flex-1 has-[select[aria-hidden=true]:last-child]:[&>[data-slot=select-trigger]:last-of-type]:rounded-r-md has-[>[data-slot=button-group]]:gap-2",{variants:{orientation:{horizontal:"[&>*:not(:first-child)]:rounded-l-none [&>*:not(:first-child)]:border-l-0 [&>*:not(:last-child)]:rounded-r-none",vertical:"flex-col [&>*:not(:first-child)]:rounded-t-none [&>*:not(:first-child)]:border-t-0 [&>*:not(:last-child)]:rounded-b-none"}},defaultVariants:{orientation:"horizontal"}});function g(e){let{className:a,orientation:s,...r}=e;return(0,t.jsx)("div",{role:"group","data-slot":"button-group","data-orientation":s,className:(0,p.cn)(m({orientation:s}),a),...r})}var f=s(80154);function j(e){var a;let{columns:s,data:x,pagination:m=!1,fallbackMessage:j=(0,f.$)("table.empty"),className:v}=e,[b,y]=(0,r.useState)({pageIndex:0,pageSize:10}),$=(0,c.N4)({columns:s,data:x,getCoreRowModel:(0,d.HT)(),getPaginationRowModel:m?(0,d.kW)():void 0,onPaginationChange:y,state:{pagination:b}});return(0,t.jsxs)("div",{className:"flex flex-col gap-5",children:[(0,t.jsx)("div",{className:(0,p.cn)(v,"border rounded-md"),children:(0,t.jsxs)(u.XI,{children:[(0,t.jsx)(u.A0,{children:$.getHeaderGroups().map(e=>(0,t.jsx)(u.Hj,{children:e.headers.map(e=>(0,t.jsx)(u.nd,{children:e.isPlaceholder?null:(0,c.Kv)(e.column.columnDef.header,e.getContext())},e.id))},e.id))}),(0,t.jsx)(u.BF,{children:(null==(a=$.getRowModel().rows)?void 0:a.length)?$.getRowModel().rows.map(e=>(0,t.jsx)(u.Hj,{children:e.getVisibleCells().map(e=>(0,t.jsx)(u.nA,{children:(0,c.Kv)(e.column.columnDef.cell,e.getContext())},e.id))},e.id)):(0,t.jsx)(u.Hj,{className:"hover:bg-transparent",children:(0,t.jsx)(u.nA,{colSpan:s.length,className:"h-24 text-center",children:j})})})]})}),m&&(0,t.jsxs)("div",{className:"flex gap-3 items-center max-md:flex-col",children:[(0,t.jsxs)("div",{className:"flex gap-3 items-center [&_button]:cursor-pointer",children:[(0,t.jsx)(h.$,{variant:"outline",size:"icon",title:(0,f.$)("table.to-first"),onClick:()=>$.firstPage(),disabled:!$.getCanPreviousPage(),children:(0,t.jsx)(i.A,{})}),(0,t.jsxs)(g,{children:[(0,t.jsxs)(h.$,{variant:"outline",onClick:()=>$.previousPage(),disabled:!$.getCanPreviousPage(),children:[(0,t.jsx)(n.A,{}),(0,f.$)("table.previous")]}),(0,t.jsxs)(h.$,{variant:"outline",onClick:()=>$.nextPage(),disabled:!$.getCanNextPage(),children:[(0,f.$)("table.next"),(0,t.jsx)(l.A,{})]})]}),(0,t.jsx)(h.$,{variant:"outline",size:"icon",title:(0,f.$)("table.to-last"),onClick:()=>$.lastPage(),disabled:!$.getCanNextPage(),children:(0,t.jsx)(o.A,{})})]}),(0,t.jsx)("span",{className:"text-muted-foreground text-sm",children:(0,f.$)("table.status",b.pageIndex+1,$.getPageCount())})]})]})}},28042:(e,a,s)=>{"use strict";s.d(a,{Ik:()=>p,MG:()=>o,Sq:()=>d,iV:()=>h});var t=s(95155);s(12115);var r=s(74466),i=s(53999),n=s(97168),l=s(89852);function o(e){let{className:a,...s}=e;return(0,t.jsx)("div",{"data-slot":"input-group",role:"group",className:(0,i.cn)("group/input-group border-input dark:bg-input/30 relative flex w-full items-center rounded-md border shadow-xs transition-[color,box-shadow] outline-none","h-9 min-w-0 has-[>textarea]:h-auto","has-[>[data-align=inline-start]]:[&>input]:pl-2","has-[>[data-align=inline-end]]:[&>input]:pr-2","has-[>[data-align=block-start]]:h-auto has-[>[data-align=block-start]]:flex-col has-[>[data-align=block-start]]:[&>input]:pb-3","has-[>[data-align=block-end]]:h-auto has-[>[data-align=block-end]]:flex-col has-[>[data-align=block-end]]:[&>input]:pt-3","has-[[data-slot=input-group-control]:focus-visible]:border-ring has-[[data-slot=input-group-control]:focus-visible]:ring-ring/50 has-[[data-slot=input-group-control]:focus-visible]:ring-[3px]","has-[[data-slot][aria-invalid=true]]:ring-destructive/20 has-[[data-slot][aria-invalid=true]]:border-destructive dark:has-[[data-slot][aria-invalid=true]]:ring-destructive/40",a),...s})}s(99474);let c=(0,r.F)("text-muted-foreground flex h-auto cursor-text items-center justify-center gap-2 py-1.5 text-sm font-medium select-none [&>svg:not([class*='size-'])]:size-4 [&>kbd]:rounded-[calc(var(--radius)-5px)] group-data-[disabled=true]/input-group:opacity-50",{variants:{align:{"inline-start":"order-first pl-3 has-[>button]:ml-[-0.45rem] has-[>kbd]:ml-[-0.35rem]","inline-end":"order-last pr-3 has-[>button]:mr-[-0.45rem] has-[>kbd]:mr-[-0.35rem]","block-start":"order-first w-full justify-start px-3 pt-3 [.border-b]:pb-3 group-has-[>input]/input-group:pt-2.5","block-end":"order-last w-full justify-start px-3 pb-3 [.border-t]:pt-3 group-has-[>input]/input-group:pb-2.5"}},defaultVariants:{align:"inline-start"}});function d(e){let{className:a,align:s="inline-start",...r}=e;return(0,t.jsx)("div",{role:"group","data-slot":"input-group-addon","data-align":s,className:(0,i.cn)(c({align:s}),a),onClick:e=>{var a,s;e.target.closest("button")||null==(s=e.currentTarget.parentElement)||null==(a=s.querySelector("input"))||a.focus()},...r})}let u=(0,r.F)("text-sm shadow-none flex gap-2 items-center",{variants:{size:{xs:"h-6 gap-1 px-2 rounded-[calc(var(--radius)-5px)] [&>svg:not([class*='size-'])]:size-3.5 has-[>svg]:px-2",sm:"h-8 px-2.5 gap-1.5 rounded-md has-[>svg]:px-2.5","icon-xs":"size-6 rounded-[calc(var(--radius)-5px)] p-0 has-[>svg]:p-0","icon-sm":"size-8 p-0 has-[>svg]:p-0"}},defaultVariants:{size:"xs"}});function p(e){let{className:a,type:s="button",variant:r="ghost",size:l="xs",...o}=e;return(0,t.jsx)(n.$,{type:s,"data-size":l,variant:r,className:(0,i.cn)(u({size:l}),a),...o})}function h(e){let{className:a,...s}=e;return(0,t.jsx)(l.p,{"data-slot":"input-group-control",className:(0,i.cn)("flex-1 rounded-none border-0 bg-transparent shadow-none focus-visible:ring-0 dark:bg-transparent",a),...s})}},31795:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>er});var t=s(95155),r=s(12115),i=s(17580),n=s(47924),l=s(6877),o=s(17881),c=s(42996),d=s(30064),u=s(53999);function p(e){let{className:a,...s}=e;return(0,t.jsx)(d.bL,{"data-slot":"tabs",className:(0,u.cn)("flex flex-col gap-2",a),...s})}function h(e){let{className:a,...s}=e;return(0,t.jsx)(d.B8,{"data-slot":"tabs-list",className:(0,u.cn)("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-lg p-[3px]",a),...s})}function x(e){let{className:a,...s}=e;return(0,t.jsx)(d.l9,{"data-slot":"tabs-trigger",className:(0,u.cn)("data-[state=active]:bg-background dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-md border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:shadow-sm [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...s})}function m(e){let{className:a,...s}=e;return(0,t.jsx)(d.UC,{"data-slot":"tabs-content",className:(0,u.cn)("flex-1 outline-none",a),...s})}var g=s(22726),f=s(31886),j=s(5196),v=s(75494),b=s(12318),y=s(97092),$=s(74126),w=s(28113),k=s(37777),N=s(97168),C=s(99840),z=s(82714),A=s(89852),P=s(80154);function O(e){let{title:a,description:s,label:i,placeholder:n,onAction:l,asChild:o,children:c}=e,d=(0,r.useRef)(null);return(0,t.jsxs)(C.lG,{children:[(0,t.jsx)(C.zM,{asChild:o,children:c}),(0,t.jsxs)(C.Cf,{children:[(0,t.jsxs)(C.c7,{children:[(0,t.jsx)(C.L3,{children:a}),s&&(0,t.jsx)(C.rr,{children:s})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,t.jsx)(z.J,{children:i}),(0,t.jsx)(A.p,{placeholder:n,ref:d})]}),(0,t.jsxs)(C.Es,{children:[(0,t.jsx)(C.HM,{asChild:!0,children:(0,t.jsx)(N.$,{variant:"outline",children:(0,P.$)("dialog.cancel")})}),(0,t.jsx)(C.HM,{asChild:!0,children:(0,t.jsx)(N.$,{onClick:()=>{d.current&&l&&l(d.current.value)},children:(0,P.$)("dialog.confirm")})})]})]})]})}var _=s(88145);function K(e){let{isOnline:a,className:s}=e;return(0,t.jsxs)(_.E,{variant:"outline",children:[(0,t.jsx)("div",{className:(0,u.cn)("w-2 h-2 rounded-full",a?"bg-green-600":"bg-muted-foreground",s)}),a?(0,P.$)("online-badge.online"):(0,P.$)("online-badge.offline")]})}var M=s(16103),E=s(62177),L=s(48778),S=s(71153),R=s(41085),W=s(30070),H=s(23291),V=s(91503),F=s(52815);function I(e){let{uuid:a}=e,s=(0,r.useRef)(null);return(0,r.useEffect)(()=>{s.current&&new V.A({canvas:s.current,skin:(0,F.mt)("players.skin-provider")+a,cape:(0,F.mt)("players.cape-provider")+a})},[a]),(0,t.jsx)("canvas",{ref:s})}var q=s(95784),B=s(90088),G=s(19832);let Q=S.z.object({gamemode:S.z.enum(Object.values(H.UZ)),isOp:S.z.boolean()});function T(e){var a;let{player:s,children:r,asChild:i}=e,n=(0,E.mN)({resolver:(0,L.u)(Q),values:{gamemode:null!=(a=s.gamemode)?a:"adventure",isOp:s.isOp}}),o=async e=>{e.gamemode!==s.gamemode&&await (0,M.Q4)(s.uuid,e.gamemode,!1),e.isOp!==s.isOp&&(s.isOp?await (0,M.B6)(s.uuid,!1):await (0,M.Hy)(s.uuid,!1)),G.P.emit("refresh-data")};return(0,t.jsxs)(R.cj,{children:[(0,t.jsx)(R.CG,{asChild:i,children:r}),(0,t.jsx)(R.h,{children:(0,t.jsx)(W.lV,{...n,children:(0,t.jsxs)("form",{className:"flex-1 flex flex-col",onSubmit:n.handleSubmit(o),children:[(0,t.jsxs)(R.Fm,{children:[(0,t.jsx)(R.qp,{children:(0,P.$)("players.edit.title")}),(0,t.jsx)(R.Qs,{children:(0,P.$)("players.edit.description")})]}),(0,t.jsxs)("div",{className:"flex-1 px-4 flex flex-col gap-5",children:[(0,t.jsx)(I,{uuid:s.uuid}),(0,t.jsxs)("div",{className:"flex justify-center items-center gap-2",children:[(0,t.jsx)(K,{isOnline:s.isOnline}),s.name?(0,t.jsx)("h2",{className:"inline-block text-lg font-semibold",children:s.name}):(0,t.jsxs)("span",{className:"text-muted-foreground italic",children:["<",(0,P.$)("players.unnamed"),">"]})]}),(0,t.jsx)(W.zB,{control:n.control,name:"gamemode",render:e=>{let{field:a}=e;return(0,t.jsxs)(W.eI,{children:[(0,t.jsx)(W.lR,{children:(0,P.$)("players.edit.form.gamemode.label")}),(0,t.jsx)(W.MJ,{children:(0,t.jsxs)(q.l6,{...a,onValueChange:a.onChange,children:[(0,t.jsx)(q.bq,{className:"w-full",children:(0,t.jsx)(q.yv,{})}),(0,t.jsxs)(q.gC,{children:[(0,t.jsx)(q.eb,{value:"adventure",children:(0,P.$)("common.gamemode.adventure")}),(0,t.jsx)(q.eb,{value:"survival",children:(0,P.$)("common.gamemode.survival")}),(0,t.jsx)(q.eb,{value:"creative",children:(0,P.$)("common.gamemode.creative")}),(0,t.jsx)(q.eb,{value:"spectator",children:(0,P.$)("common.gamemode.spectator")})]})]})}),(0,t.jsx)(W.C5,{})]})}}),(0,t.jsx)(W.zB,{control:n.control,name:"isOp",render:e=>{let{field:a}=e;return(0,t.jsxs)(W.eI,{className:"flex justify-between",children:[(0,t.jsx)(W.lR,{children:(0,P.$)("players.edit.form.op.label")}),(0,t.jsx)(W.MJ,{children:(0,t.jsx)(B.d,{...a,value:"",defaultChecked:s.isOp,onCheckedChange:a.onChange})}),(0,t.jsx)(W.C5,{})]})}}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(z.J,{children:(0,P.$)("players.edit.form.manage")}),(0,t.jsxs)("div",{className:"grid grid-rows-2 grid-cols-2 gap-2 [&>*]:cursor-pointer",children:[s.name&&void 0!==s.isWhitelisted&&(s.isWhitelisted?(0,t.jsxs)(N.$,{variant:"outline",onClick:async()=>{await (0,M.CB)(s.name,s.uuid),G.P.emit("refresh-data")},children:[(0,t.jsx)(v.A,{}),(0,P.$)("players.action.remove-from-whitelist")]}):(0,t.jsxs)(N.$,{variant:"outline",onClick:async()=>{await (0,M.EW)(s.name,s.uuid),G.P.emit("refresh-data")},children:[(0,t.jsx)(b.A,{}),(0,P.$)("players.action.add-to-whitelist")]})),(0,t.jsx)(O,{title:(0,P.$)("players.action.kick.prompt.title"),description:(0,P.$)("players.action.kick.prompt.description"),label:(0,P.$)("players.action.kick.prompt.label"),placeholder:(0,P.$)("players.action.kick.prompt.placeholder"),onAction:async e=>{await (0,M.HQ)(s.uuid,e),G.P.emit("refresh-data")},asChild:!0,children:(0,t.jsxs)(N.$,{variant:"outline",className:void 0===s.isWhitelisted?"col-start-1":"col-start-2",disabled:!s.isOnline,children:[(0,t.jsx)(y.A,{}),(0,P.$)("players.action.kick")]})}),s.isBanned?(0,t.jsxs)(N.$,{variant:"outline",className:void 0===s.isWhitelisted?"col-start-2":"col-span-2",onClick:async()=>{await (0,M.zf)(s.uuid),G.P.emit("refresh-data")},children:[(0,t.jsx)(w.A,{}),(0,P.$)("players.action.pardon")]}):(0,t.jsx)(O,{title:(0,P.$)("players.action.ban.prompt.title"),description:(0,P.$)("players.action.ban.prompt.description"),label:(0,P.$)("players.action.ban.prompt.label"),placeholder:(0,P.$)("players.action.ban.prompt.placeholder"),onAction:async e=>{await (0,M._L)(s.uuid,e),G.P.emit("refresh-data")},asChild:!0,children:(0,t.jsxs)(N.$,{variant:"destructive",className:void 0===s.isWhitelisted?"col-start-2":"col-span-2",children:[(0,t.jsx)(l.A,{}),(0,P.$)("players.action.ban")]})})]})]})]}),(0,t.jsxs)(R.XW,{children:[(0,t.jsx)(R.kN,{asChild:!0,children:(0,t.jsx)(N.$,{type:"submit",className:"cursor-pointer",children:(0,P.$)("dialog.confirm")})}),(0,t.jsx)(R.kN,{asChild:!0,children:(0,t.jsx)(N.$,{variant:"outline",className:"cursor-pointer",children:(0,P.$)("dialog.cancel")})})]})]})})})]})}var D=s(99211);let J=[{accessorKey:"name",header:(0,P.$)("players.player-list.columns.name"),cell:e=>{let{row:a}=e,{name:s,uuid:r}=a.original;return(0,t.jsxs)(k.m_,{children:[(0,t.jsx)(k.k$,{children:(0,t.jsx)(T,{player:a.original,asChild:!0,children:s?(0,t.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("img",{src:(0,F.mt)("players.avatar-provider")+r,alt:s,width:17,height:17}),(0,t.jsx)("span",{className:"font-semibold",children:s})]}):(0,t.jsxs)("span",{className:"text-muted-foreground italic cursor-pointer",children:["<",(0,P.$)("players.unnamed"),">"]})})}),(0,t.jsx)(k.ZI,{children:r})]})}},{accessorKey:"isOnline",header:()=>(0,t.jsx)("div",{className:"text-center",children:(0,P.$)("players.player-list.columns.is-online")}),cell:e=>{let{row:a}=e,{isOnline:s}=a.original;return(0,t.jsx)("div",{className:"text-center",children:(0,t.jsx)(K,{isOnline:s})})}},{accessorKey:"uuid",header:"",cell:""},{accessorKey:"gamemode",header:()=>(0,t.jsx)("div",{className:"text-center",children:(0,P.$)("players.player-list.columns.gamemode")}),cell:e=>{let{row:a}=e,{gamemode:s}=a.original;return s?(0,t.jsx)("div",{className:"text-center",children:(0,u.Cq)(s)}):(0,t.jsx)(t.Fragment,{})}},{accessorKey:"isWhitelisted",header:()=>(0,t.jsx)("div",{className:"text-center",children:(0,P.$)("players.player-list.columns.is-whitelisted")}),cell:e=>{let{row:a,column:s}=e;return(0,r.useEffect)(()=>{s.toggleVisibility(void 0!==a.original.isWhitelisted)},[a,s]),(0,t.jsx)("div",{className:"flex justify-center",children:a.original.isWhitelisted?(0,t.jsx)(j.A,{size:18,color:"var(--color-muted-foreground)"}):(0,t.jsx)(t.Fragment,{})})}},{accessorKey:"isOp",header:()=>(0,t.jsx)("div",{className:"text-center",children:"OP"}),cell:e=>{let{row:a}=e;return(0,t.jsx)("div",{className:"flex justify-center",children:a.original.isOp?(0,t.jsx)(j.A,{size:18,color:"var(--color-muted-foreground)"}):(0,t.jsx)(t.Fragment,{})})}},{header:" ",cell:e=>{let{row:a}=e,{name:s,uuid:r,isOnline:i,isWhitelisted:n}=a.original;return(0,t.jsxs)("div",{className:"flex justify-end [&>*]:h-4 [&>*]:cursor-pointer [&>*]:hover:!bg-transparent",children:[void 0!==n&&(n?(0,t.jsx)(N.$,{variant:"ghost",size:"icon",title:(0,P.$)("players.action.remove-from-whitelist"),onClick:async()=>{await (0,M.CB)(s,r),G.P.emit("refresh-data")},children:(0,t.jsx)(v.A,{})}):(0,t.jsx)(N.$,{variant:"ghost",size:"icon",title:(0,P.$)("players.action.add-to-whitelist"),onClick:async()=>{await (0,M.EW)(s,r),G.P.emit("refresh-data")},children:(0,t.jsx)(b.A,{})})),i&&(0,t.jsx)(O,{title:(0,P.$)("players.action.kick.prompt.title"),description:(0,P.$)("players.action.kick.prompt.description"),label:(0,P.$)("players.action.kick.prompt.label"),placeholder:(0,P.$)("players.action.kick.prompt.placeholder"),onAction:async e=>{await (0,M.HQ)(r,e),G.P.emit("refresh-data")},asChild:!0,children:(0,t.jsx)(N.$,{variant:"ghost",size:"icon",title:(0,P.$)("players.action.kick"),children:(0,t.jsx)(y.A,{})})}),(0,t.jsx)(O,{title:(0,P.$)("players.action.ban.prompt.title"),description:(0,P.$)("players.action.ban.prompt.description"),label:(0,P.$)("players.action.ban.prompt.label"),placeholder:(0,P.$)("players.action.ban.prompt.placeholder"),onAction:async e=>{await (0,M._L)(r,e),G.P.emit("refresh-data")},asChild:!0,children:(0,t.jsx)(N.$,{variant:"ghost",size:"icon",title:(0,P.$)("players.action.ban"),children:(0,t.jsx)(l.A,{className:"stroke-red-400"})})}),(0,t.jsx)(D.F,{title:(0,P.$)("players.action.remove.alert.title",s),description:i?(0,P.$)("players.action.remove.alert.description2"):(0,P.$)("players.action.remove.alert.description1"),onAction:async()=>{i&&(await (0,M.HQ)(r,(0,P.$)("players.action.remove.kick-reason"),!1),await (0,u.yy)(100)),await (0,M.wx)(r),G.P.emit("refresh-data")},asChild:!0,children:(0,t.jsx)(N.$,{variant:"ghost",size:"icon",title:(0,P.$)("players.action.remove"),children:(0,t.jsx)($.A,{className:"stroke-red-400"})})})]})}}],U=[{accessorKey:"name",header:(0,P.$)("players.banned-list.columns.name"),cell:e=>{let{row:a}=e,{name:s,uuid:r}=a.original;return(0,t.jsxs)(k.m_,{children:[(0,t.jsx)(k.k$,{children:(0,t.jsx)(T,{player:a.original,asChild:!0,children:(0,t.jsxs)("div",{className:"flex items-center gap-2 cursor-pointer",children:[(0,t.jsx)("img",{src:(0,F.mt)("players.avatar-provider")+r,alt:s,width:17,height:17}),(0,t.jsx)("span",{className:"font-semibold",children:s})]})})}),(0,t.jsx)(k.ZI,{children:r})]})}},{accessorKey:"banReason",header:(0,P.$)("players.banned-list.columns.ban-reason"),cell:e=>{let{row:a}=e,{banReason:s}=a.original;return s&&(0,t.jsx)("span",{children:(0,u.QM)(s)})}},{accessorKey:"uuid",header:"",cell:""},{accessorKey:"isOp",header:()=>(0,t.jsx)("div",{className:"text-center",children:"OP"}),cell:e=>{let{row:a}=e;return(0,t.jsx)("div",{className:"flex justify-center",children:a.original.isOp?(0,t.jsx)(j.A,{size:18,color:"var(--color-muted-foreground)"}):(0,t.jsx)(t.Fragment,{})})}},{header:" ",cell:e=>{let{row:a}=e;return(0,t.jsx)(N.$,{variant:"ghost",size:"icon",className:"float-right h-4 cursor-pointer hover:!bg-transparent",title:(0,P.$)("players.action.pardon"),onClick:async()=>{await (0,M.zf)(a.original.uuid),G.P.emit("refresh-data")},children:(0,t.jsx)(w.A,{className:"stroke-green-600"})})}}];var Z=s(24232),X=s(86801),Y=s(28042),ee=s(84616),ea=s(56671),es=s(88524);function et(e){let{children:a,asChild:s}=e,[i,n]=(0,r.useState)(!1),[l,o]=(0,r.useState)([]),[c,d]=(0,r.useState)(""),p=async()=>{try{let e=await (0,f.qV)("/api/banned-ips");o(e.bannedIps)}catch(e){(0,f.Kf)(e,(0,P.$)("players.banned-ips.fetch.error"),[[400,(0,P.$)("common.error.400")],[401,(0,P.$)("common.error.401")]])}},h=async e=>{if(""===e||!(0,u.NU)(e))return void ea.oR.error((0,P.$)("players.banned-ips.add.error"),{description:(0,P.$)("players.banned-ips.add.error.400")});if(l.includes(e))return void ea.oR.warning((0,P.$)("players.banned-ips.add.exist"));try{await (0,f.ow)("/api/banned-ips/add?ip=".concat(e)),d(""),G.P.emit("refresh-data"),ea.oR.success((0,P.$)("players.banned-ips.add.success"))}catch(e){(0,f.Kf)(e,(0,P.$)("players.banned-ips.add.error"),[[400,(0,P.$)("players.banned-ips.add.error.400")],[401,(0,P.$)("common.error.401")]])}},x=async e=>{try{await (0,f.ow)("/api/banned-ips/remove?ip=".concat(e)),G.P.emit("refresh-data"),ea.oR.success((0,P.$)("players.banned-ips.pardon.success"))}catch(e){(0,f.Kf)(e,(0,P.$)("players.banned-ips.pardon.error"),[[400,(0,P.$)("players.banned-ips.pardon.error.400")],[401,(0,P.$)("common.error.401")]])}};return(0,r.useEffect)(()=>{G.P.on("refresh-data",()=>{p()})},[]),(0,r.useEffect)(()=>{i?p():d("")},[i]),(0,t.jsxs)(C.lG,{open:i,onOpenChange:n,children:[(0,t.jsx)(C.zM,{asChild:s,children:a}),(0,t.jsxs)(C.Cf,{children:[(0,t.jsxs)(C.c7,{children:[(0,t.jsx)(C.L3,{children:(0,P.$)("players.banned-ips.title")}),(0,t.jsx)(C.rr,{children:(0,P.$)("players.banned-ips.description")})]}),(0,t.jsxs)("div",{className:"border rounded-md",children:[(0,t.jsx)("div",{className:"max-h-64 overflow-y-auto",children:(0,t.jsx)(es.XI,{children:(0,t.jsx)(es.BF,{children:l.map((e,a)=>(0,t.jsxs)(es.Hj,{children:[(0,t.jsx)(es.nA,{children:e}),(0,t.jsx)(es.nA,{children:(0,t.jsx)(N.$,{variant:"ghost",size:"icon",className:"float-right h-4 cursor-pointer hover:!bg-transparent",title:(0,P.$)("players.banned-ips.pardon"),onClick:()=>x(e),children:(0,t.jsx)(w.A,{className:"stroke-green-600"})})})]},a))})})}),(0,t.jsxs)("div",{className:(0,u.cn)("flex gap-2 p-2",l.length>0&&"border-t"),children:[(0,t.jsx)(A.p,{value:c,placeholder:(0,P.$)("players.banned-ips.input.placeholder"),className:"h-8",onInput:e=>d(e.target.value),onKeyDown:e=>"Enter"===e.key&&c.length>0&&h(c)}),(0,t.jsx)(N.$,{variant:"ghost",size:"icon-sm",className:"cursor-pointer",disabled:0===c.length,onClick:()=>h(c),children:(0,t.jsx)(ee.A,{})})]})]}),(0,t.jsx)(C.Es,{children:(0,t.jsx)(C.HM,{asChild:!0,children:(0,t.jsx)(N.$,{variant:"outline",children:(0,P.$)("dialog.close")})})})]})]})}function er(){let[e,a]=(0,r.useState)([]),[s,d]=(0,r.useState)([]),[u,j]=(0,r.useState)(0),[v,b]=(0,r.useState)(!1),[y,$]=(0,r.useState)((0,F.mt)("state.players.tab")),[w,k]=(0,r.useState)(""),C=(0,r.useMemo)(()=>e.filter(e=>{let{isBanned:a}=e;return!a}),[e]),z=(0,r.useMemo)(()=>e.filter(e=>{let{isBanned:a}=e;return a}),[e]),A=async()=>{try{let e=await (0,f.qV)("/api/players"),s=e.players.filter(e=>{let{name:a}=e;return void 0!==a}).sort((e,a)=>e.name.localeCompare(a.name));a(s),d(e.players.filter(e=>{let{name:a}=e;return void 0===a})),j(e.maxPlayerCount),b(e.whitelist)}catch(e){(0,f.Kf)(e,(0,P.$)("players.error"),[[400,(0,P.$)("common.error.400")],[401,(0,P.$)("common.error.401")],[500,(0,P.$)("common.error.500")]])}};return(0,r.useEffect)(()=>{A(),G.P.on("refresh-data",()=>A())},[]),(0,r.useEffect)(()=>{document.body.addEventListener("keydown",e=>{e.ctrlKey&&"ArrowRight"===e.key?$("banned-list"):e.ctrlKey&&"ArrowLeft"===e.key&&$("player-list")})},[]),(0,t.jsxs)(Z.C,{title:(0,P.$)("players.title"),subTitle:"player-list"===y?(0,P.$)("players.player-list.title"):(0,P.$)("players.banned-list.title"),icon:(0,t.jsx)(i.A,{}),className:"flex flex-col gap-3",children:[(0,t.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,P.$)("players.hint")}),(0,t.jsxs)(p,{value:y,onValueChange:e=>{$(e),(0,F.kz)("state.players.tab",e)},children:[(0,t.jsxs)("div",{className:"flex justify-between items-center max-lg:flex-col-reverse max-lg:items-start max-lg:gap-2",children:[(0,t.jsxs)(h,{className:"[&>*]:cursor-pointer",children:[(0,t.jsx)(x,{value:"player-list",children:"".concat((0,P.$)("players.player-list.title")," (").concat(e.filter(e=>{let{isOnline:a}=e;return a}).length," / ").concat(u,")")}),(0,t.jsx)(x,{value:"banned-list",children:"".concat((0,P.$)("players.banned-list.title")," (").concat(e.filter(e=>{let{isBanned:a}=e;return a}).length,")")})]}),(0,t.jsxs)("div",{className:"flex gap-2 max-sm:flex-col max-sm:items-start",children:[(0,t.jsxs)(Y.MG,{children:[(0,t.jsx)(Y.Sq,{children:(0,t.jsx)(n.A,{})}),(0,t.jsx)(Y.iV,{value:w,placeholder:(0,P.$)("players.search.placeholder"),onChange:e=>k(e.target.value)})]}),(0,t.jsx)(et,{asChild:!0,children:(0,t.jsxs)(N.$,{variant:"outline",className:"cursor-pointer",children:[(0,t.jsx)(l.A,{}),(0,P.$)("players.banned-ips")]})}),v?(0,t.jsx)(X.T,{onDisableWhitelist:()=>b(!1),asChild:!0,children:(0,t.jsxs)(N.$,{variant:"outline",className:"cursor-pointer",children:[(0,t.jsx)(o.A,{}),(0,P.$)("players.edit-whitelist")]})}):(0,t.jsxs)(N.$,{variant:"outline",className:"cursor-pointer",onClick:async()=>{await (0,M.lE)(!0),await A(),b(!0)},children:[(0,t.jsx)(c.A,{}),(0,P.$)("players.enable-whitelist")]})]})]}),(0,t.jsx)(m,{value:"player-list",children:(0,t.jsx)(g.b,{columns:J,data:[...C.filter(e=>{let{name:a,isOnline:s}=e;return a.toLowerCase().includes(w.toLowerCase())&&s}),...C.filter(e=>{let{name:a,isOnline:s,isOp:t}=e;return a.toLowerCase().includes(w.toLowerCase())&&!s&&t}),...C.filter(e=>{let{name:a,isOnline:s,isOp:t}=e;return a.toLowerCase().includes(w.toLowerCase())&&!s&&!t}),...s],pagination:!0,fallbackMessage:(0,P.$)("players.empty")})}),(0,t.jsx)(m,{value:"banned-list",children:(0,t.jsx)(g.b,{columns:U,data:z.filter(e=>{let{name:a}=e;return a.toLowerCase().includes(w.toLowerCase())}),pagination:!0,fallbackMessage:(0,P.$)("players.empty")})})]})]})}},53571:(e,a,s)=>{Promise.resolve().then(s.bind(s,31795))},95784:(e,a,s)=>{"use strict";s.d(a,{bq:()=>u,eb:()=>h,gC:()=>p,l6:()=>c,yv:()=>d});var t=s(95155);s(12115);var r=s(14582),i=s(66474),n=s(5196),l=s(47863),o=s(53999);function c(e){let{...a}=e;return(0,t.jsx)(r.bL,{"data-slot":"select",...a})}function d(e){let{...a}=e;return(0,t.jsx)(r.WT,{"data-slot":"select-value",...a})}function u(e){let{className:a,size:s="default",children:n,...l}=e;return(0,t.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":s,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),...l,children:[n,(0,t.jsx)(r.In,{asChild:!0,children:(0,t.jsx)(i.A,{className:"size-4 opacity-50"})})]})}function p(e){let{className:a,children:s,position:i="popper",...n}=e;return(0,t.jsx)(r.ZL,{children:(0,t.jsxs)(r.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===i&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",a),position:i,...n,children:[(0,t.jsx)(x,{}),(0,t.jsx)(r.LM,{className:(0,o.cn)("p-1","popper"===i&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:s}),(0,t.jsx)(m,{})]})})}function h(e){let{className:a,children:s,...i}=e;return(0,t.jsxs)(r.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),...i,children:[(0,t.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,t.jsx)(r.VF,{children:(0,t.jsx)(n.A,{className:"size-4"})})}),(0,t.jsx)(r.p4,{children:s})]})}function x(e){let{className:a,...s}=e;return(0,t.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,t.jsx)(l.A,{className:"size-4"})})}function m(e){let{className:a,...s}=e;return(0,t.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",a),...s,children:(0,t.jsx)(i.A,{className:"size-4"})})}}},e=>{e.O(0,[9690,4390,1210,3498,9641,5702,5100,5452,6671,3207,3464,371,5299,9733,7535,154,193,4305,4419,8441,5964,7358],()=>e(e.s=53571)),_N_E=e.O()}]);