(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2630],{16268:(e,s,t)=>{"use strict";t.d(s,{OJ:()=>l,qw:()=>n,r4:()=>i});let a=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"],r=["k","l","m","n","o"];function l(e){return e.replaceAll("\xc2","")}function n(e){return e.replaceAll("\xa7","\xc2\xa7")}function i(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1/0,n=l(e),i=document.createElement("span");i.className="cc-root";let o=i,d=1,c=0;for(let e=0;e<n.length;e++){let l=n[e];if("\n"===l&&d<s){o.appendChild(document.createElement("br")),d++,c=0;continue}if("\xa7"===l){let s=n[e+1];if("r"===s){o=i,e++;continue}let t=a.includes(s),l=r.includes(s);if(!t&&!l)continue;t&&(o=i);let d=document.createElement("span");d.className="cc-".concat(s),o.appendChild(d),o=d,e++}else c<t&&(o.innerHTML+=l,c++)}return i}},33963:(e,s,t)=>{Promise.resolve().then(t.bind(t,59980))},59980:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>O});var a=t(95155),r=t(12115),l=t(4648),n=t(29869),i=t(56671),o=t(24232),d=t(91788),c=t(55702),m=t(62525),u=t(88482),x=t(53999),f=t(95011),h=t(88145),p=t(37777),v=t(97168),j=t(31886),g=t(99211),b=t(71153),N=t(62177),w=t(48778),$=t(23291),y=t(41085),C=t(30070),z=t(95784),k=t(89852),A=t(19832),E=t(80154);let _=b.z.object({displayName:b.z.string().nonempty((0,E.$)("saves.edit.form.name.empty")),defaultGameMode:b.z.enum(Object.values($.UZ))});function Z(e){let{save:s,children:t,asChild:r}=e,l=(0,N.mN)({resolver:(0,w.u)(_),values:{displayName:(0,x.QM)(s.displayName),defaultGameMode:s.defaultGameMode}}),n=async e=>{try{e.displayName=(0,x.q3)(e.displayName),await (0,j.ow)("/api/saves/".concat(s.name),e),A.P.emit("refresh-data")}catch(e){(0,j.Kf)(e,(0,E.$)("saves.edit.error"),[[401,(0,E.$)("common.error.401")],[500,(0,E.$)("common.error.500")]])}};return(0,a.jsxs)(y.cj,{children:[(0,a.jsx)(y.CG,{asChild:r,children:t}),(0,a.jsx)(y.h,{children:(0,a.jsx)(C.lV,{...l,children:(0,a.jsxs)("form",{className:"flex-1 flex flex-col",onSubmit:l.handleSubmit(n),children:[(0,a.jsxs)(y.Fm,{children:[(0,a.jsx)(y.qp,{children:(0,E.$)("saves.edit.title")}),(0,a.jsx)(y.Qs,{children:(0,E.$)("saves.edit.description")})]}),(0,a.jsxs)("div",{className:"flex-1 px-4 flex flex-col gap-5",children:[(0,a.jsx)(C.zB,{control:l.control,name:"displayName",render:e=>{let{field:s}=e;return(0,a.jsxs)(C.eI,{children:[(0,a.jsx)(C.lR,{children:(0,E.$)("saves.edit.form.name.label")}),(0,a.jsx)(f.Z,{className:"text-center [&_*]:wrap-anywhere",children:s.value}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)(C.MJ,{children:(0,a.jsx)(k.p,{...s,placeholder:(0,E.$)("saves.edit.form.name.placeholder"),autoFocus:!0,autoComplete:"off"})}),(0,a.jsx)(v.$,{variant:"outline",size:"icon",className:"cursor-pointer",onClick:e=>{e.preventDefault(),l.setValue("displayName",s.value+"\xa7")},children:"\xa7"})]}),(0,a.jsx)(C.C5,{})]})}}),(0,a.jsx)(C.zB,{control:l.control,name:"defaultGameMode",render:e=>{let{field:s}=e;return(0,a.jsxs)(C.eI,{children:[(0,a.jsx)(C.lR,{children:(0,E.$)("saves.edit.form.gamemode.label")}),(0,a.jsx)(C.MJ,{children:(0,a.jsxs)(z.l6,{...s,onValueChange:s.onChange,children:[(0,a.jsx)(z.bq,{className:"w-full",children:(0,a.jsx)(z.yv,{})}),(0,a.jsxs)(z.gC,{children:[(0,a.jsx)(z.eb,{value:$.UZ.ADVENTURE,children:(0,E.$)("common.gamemode.adventure")}),(0,a.jsx)(z.eb,{value:$.UZ.SURVIVAL,children:(0,E.$)("common.gamemode.survival")}),(0,a.jsx)(z.eb,{value:$.UZ.CREATIVE,children:(0,E.$)("common.gamemode.creative")}),(0,a.jsx)(z.eb,{value:$.UZ.SPECTATOR,children:(0,E.$)("common.gamemode.spectator")})]})]})}),(0,a.jsx)(C.C5,{})]})}})]}),(0,a.jsxs)(y.XW,{children:[(0,a.jsx)(y.kN,{asChild:!0,children:(0,a.jsx)(v.$,{type:"submit",className:"cursor-pointer",children:(0,E.$)("dialog.save")})}),(0,a.jsx)(y.kN,{asChild:!0,children:(0,a.jsx)(v.$,{variant:"outline",className:"cursor-pointer",children:(0,E.$)("dialog.cancel")})})]})]})})})]})}var M=t(35576),R=t.n(M);function T(e){let{save:s,className:t}=e,{name:r,displayName:l,path:n,size:o,isRunning:b,isCurrent:N,defaultGameMode:w}=s,$=async()=>{let e=await (0,j.qV)("/api/saves/".concat(r));window.location.href="".concat(j.y0,"/file/").concat(e.download,"/").concat(r,".zip")},y=async()=>{try{await (0,j.nl)("/api/saves/".concat(r)),A.P.emit("refresh-data")}catch(e){i.oR.error((0,E.$)("saves.list.item.delete.error",r),{description:e.message})}},C=async()=>{if(!N)try{await (0,j.ow)("/api/control/world?save=".concat(r)),A.P.emit("refresh-data"),i.oR.success((0,E.$)("saves.list.item.switch.success"),{description:b?(0,E.$)("saves.list.item.switch.success.description2"):(0,E.$)("saves.list.item.switch.success.description1")})}catch(e){(0,j.Kf)(e,(0,E.$)("saves.list.item.switch.error"),[[400,(0,E.$)("common.error.400")],[401,(0,E.$)("common.error.401")],[404,(0,E.$)("saves.list.item.switch.error.404")],[500,(0,E.$)("common.error.500")]])}};return(0,a.jsxs)(u.Zp,{className:(0,x.cn)("rounded-md min-h-fit px-3 py-3 flex flex-col justify-between hover:bg-muted",N&&"bg-green-50 hover:bg-background border-green-600 dark:bg-green-950 dark:border-green-900",t),children:[(0,a.jsxs)(p.m_,{children:[(0,a.jsx)(p.k$,{asChild:!0,children:(0,a.jsxs)("div",{className:"w-full flex flex-col gap-1 px-1 overflow-hidden cursor-pointer",onClick:()=>C(),children:[(0,a.jsx)(f.Z,{className:"wrap-anywhere",children:(0,x.QM)(l)}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground w-full overflow-hidden whitespace-nowrap text-ellipsis",children:r})]})}),(0,a.jsx)(p.ZI,{children:n})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center flex-wrap gap-3 pl-1",children:[(0,a.jsx)("span",{className:"text-sm",children:(0,x.Cq)(w)}),b&&(0,a.jsxs)(h.E,{variant:"outline",className:"h-fit border-emerald-700 dark:border-green-900",children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-600"}),(0,E.$)("saves.list.item.current")]}),(0,a.jsx)("span",{className:(0,x.cn)("mr-2 text-xs text-muted-foreground",R().className),children:(0,x.$c)(o)})]}),(0,a.jsxs)("div",{className:"flex self-end [&_button]:cursor-pointer",children:[N?(0,a.jsx)(g.F,{title:(0,E.$)("saves.list.item.download.alert.title",r),description:(0,E.$)("saves.list.item.download.alert.description"),onAction:()=>i.oR.promise($(),{loading:(0,E.$)("saves.list.item.download.loading"),error:(0,E.$)("saves.list.item.download.error",r)}),asChild:!0,children:(0,a.jsx)(v.$,{variant:"ghost",size:"icon",title:(0,E.$)("saves.list.item.download"),children:(0,a.jsx)(d.A,{})})}):(0,a.jsx)(v.$,{variant:"ghost",size:"icon",title:(0,E.$)("saves.list.item.download"),onClick:()=>i.oR.promise($(),{loading:(0,E.$)("saves.list.item.download.loading"),error:(0,E.$)("saves.list.item.download.error",r)}),children:(0,a.jsx)(d.A,{})}),(0,a.jsx)(Z,{save:s,asChild:!0,children:(0,a.jsx)(v.$,{variant:"ghost",size:"icon",title:(0,E.$)("saves.list.item.edit"),children:(0,a.jsx)(c.A,{})})}),(0,a.jsx)(g.F,{title:(0,E.$)("saves.list.item.delete.alert.title",r),description:(0,E.$)("saves.list.item.delete.alert.description"),onAction:()=>y(),asChild:!0,children:(0,a.jsx)(v.$,{variant:"ghost",size:"icon",disabled:b||N,title:(0,E.$)("saves.list.item.delete"),children:(0,a.jsx)(m.A,{})})})]})]})]})}var q=t(55863);function L(e){let{className:s,value:t,...r}=e;return(0,a.jsx)(q.bL,{"data-slot":"progress",className:(0,x.cn)("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",s),...r,children:(0,a.jsx)(q.C1,{"data-slot":"progress-indicator",className:"bg-green-700 dark:bg-green-600 h-full w-full flex-1 transition-all",style:{transform:"translateX(-".concat(100-(t||0),"%)")}})})}var S=t(16559),V=t(82714),D=t(6937);function O(){let[e,s]=(0,r.useState)([]),[t,d]=(0,r.useState)(!1),[c,m]=(0,r.useState)(null),[u,f]=(0,r.useState)(null),[h,p]=(0,r.useState)(!1),g=async()=>{try{let e=await (0,j.qV)("/api/saves");s(e.saves)}catch(e){(0,j.Kf)(e,(0,E.$)("saves.fetch.error"),[[400,(0,E.$)("common.error.400")],[401,(0,E.$)("common.error.401")]])}},b=async e=>{if(d(!1),!e.name.endsWith(".zip"))return void i.oR.error((0,E.$)("saves.upload.error"),{description:(0,E.$)("saves.upload.error.description")});m(e.name);try{await (0,j.QM)("/api/saves",e,e=>{f(e<1?e:null)}),g()}catch(e){(0,j.Kf)(e,(0,E.$)("saves.upload.error"),[[400,(0,E.$)("saves.upload.error.400")],[401,(0,E.$)("common.error.401")],[403,(0,E.$)("saves.upload.error.403")],[409,(0,E.$)("saves.upload.error.409")],[500,(0,E.$)("common.error.500")]])}};return(0,r.useEffect)(()=>{g(),A.P.on("refresh-data",()=>g())},[]),(0,a.jsxs)(o.C,{title:(0,E.$)("saves.title"),icon:(0,a.jsx)(l.A,{}),className:"relative h-full z-20",onDragEnter:()=>d(!0),children:[(0,a.jsxs)("div",{className:(0,x.cn)("absolute top-0 left-0 right-0 bottom-16 flex flex-col justify-center items-center gap-4",t?"":"hidden"),children:[(0,a.jsx)("div",{className:"absolute w-full h-full border-4 rounded-sm border-dashed",onDrop:e=>{e.preventDefault(),b(e.dataTransfer.files[0])},onDragOver:e=>e.preventDefault(),onDragLeave:()=>d(!1)}),(0,a.jsx)(n.A,{size:60,stroke:"var(--color-muted-foreground)"}),(0,a.jsx)("span",{className:"text-muted-foreground",children:(0,E.$)("saves.dnd.label")})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex justify-between max-lg:flex-col max-lg:gap-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-3",children:[(0,a.jsx)("span",{className:"text-sm text-muted-foreground max-md:hidden",children:(0,E.$)("saves.description.line1")}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:(0,E.$)("saves.description.line2")})]}),u&&(0,a.jsxs)("div",{className:"w-72 self-end max-md:w-full flex flex-col justify-end items-end gap-2",children:[(0,a.jsx)(D.E,{id:"saves.progress.label",args:[c]}),(0,a.jsx)(L,{value:100*u,className:"h-1"})]})]}),(0,a.jsxs)("div",{className:"flex justify-between items-end",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold",children:(0,E.$)("saves.list.title")}),(0,a.jsxs)(S.Lt,{open:h,onOpenChange:p,children:[(0,a.jsx)(S.tv,{asChild:!0,children:(0,a.jsxs)(v.$,{className:"cursor-pointer",children:[(0,a.jsx)(n.A,{}),(0,E.$)("saves.list.upload")]})}),(0,a.jsxs)(S.EO,{children:[(0,a.jsxs)(S.wd,{children:[(0,a.jsx)(S.r7,{children:(0,E.$)("saves.list.upload.title")}),(0,a.jsx)(S.$v,{children:(0,E.$)("saves.list.upload.description")})]}),(0,a.jsx)(V.J,{children:(0,E.$)("saves.list.upload.input.label")}),(0,a.jsx)(k.p,{type:"file",onChange:e=>{let s=e.target.files;s&&b(s[0]),p(!1)}}),(0,a.jsx)(S.ck,{children:(0,a.jsx)(S.Zr,{children:(0,E.$)("dialog.close")})})]})]})]}),(0,a.jsx)("div",{className:"pt-2 grid grid-cols-3 max-xl:grid-cols-2 max-lg:flex flex-col gap-4",children:e.map((e,s)=>(0,a.jsx)(T,{save:e},s))})]})]})}},88482:(e,s,t)=>{"use strict";t.d(s,{BT:()=>o,Wu:()=>d,ZB:()=>i,Zp:()=>l,aR:()=>n,wL:()=>c});var a=t(95155);t(12115);var r=t(53999);function l(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,r.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",s),...t})}function n(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,r.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",s),...t})}function i(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,r.cn)("leading-none font-semibold",s),...t})}function o(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-description",className:(0,r.cn)("text-muted-foreground text-sm",s),...t})}function d(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,r.cn)("px-6",s),...t})}function c(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"card-footer",className:(0,r.cn)("flex items-center px-6 [.border-t]:pt-6",s),...t})}},95011:(e,s,t)=>{"use strict";t.d(s,{Z:()=>h});var a=t(95155),r=t(12115),l=t(16268),n=t(53999);let i="|i!:;.";function o(e){return" "===e?" ":i.includes(e)?(0,n.gI)(i.split("")):(0,n.gI)("+/\\=023456789ABCDEFGHJKLMNOPQRSTUVWXYZabcdeghjmnopqrsuvwxyz\xa2\xa3\xa5\xb1\xb5\xc0\xc1\xc2\xc3\xc4\xc5\xc7\xd1\xd2\xd3\xd4\xd5\xd6\xd7\xd8\xd9\xda\xdb\xdc\xdd\xeb".split(""))}var d=t(21509),c=t.n(d),m=t(4424),u=t.n(m),x=t(4852),f=t.n(x);function h(e){let{maxLines:s=1,maxCharPerLine:t=1/0,children:i,className:d}=e,m=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(m.current)for(let e of(m.current.innerHTML="",m.current.appendChild((0,l.r4)(i,s,t)),m.current.getElementsByClassName("cc-k")))e instanceof HTMLSpanElement&&function(e){let s=e.innerText,t=()=>{e.innerText=Array.from(s).map(o).join(""),requestAnimationFrame(t)};requestAnimationFrame(t)}(e)},[i,s,t]),(0,a.jsx)("div",{className:(0,n.cn)("[&_*]:leading-0.5",d,c().className,u().className,f().variable),ref:m})}},95784:(e,s,t)=>{"use strict";t.d(s,{bq:()=>m,eb:()=>x,gC:()=>u,l6:()=>d,yv:()=>c});var a=t(95155);t(12115);var r=t(14582),l=t(66474),n=t(5196),i=t(47863),o=t(53999);function d(e){let{...s}=e;return(0,a.jsx)(r.bL,{"data-slot":"select",...s})}function c(e){let{...s}=e;return(0,a.jsx)(r.WT,{"data-slot":"select-value",...s})}function m(e){let{className:s,size:t="default",children:n,...i}=e;return(0,a.jsxs)(r.l9,{"data-slot":"select-trigger","data-size":t,className:(0,o.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...i,children:[n,(0,a.jsx)(r.In,{asChild:!0,children:(0,a.jsx)(l.A,{className:"size-4 opacity-50"})})]})}function u(e){let{className:s,children:t,position:l="popper",...n}=e;return(0,a.jsx)(r.ZL,{children:(0,a.jsxs)(r.UC,{"data-slot":"select-content",className:(0,o.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===l&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:l,...n,children:[(0,a.jsx)(f,{}),(0,a.jsx)(r.LM,{className:(0,o.cn)("p-1","popper"===l&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(h,{})]})})}function x(e){let{className:s,children:t,...l}=e;return(0,a.jsxs)(r.q7,{"data-slot":"select-item",className:(0,o.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...l,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(r.VF,{children:(0,a.jsx)(n.A,{className:"size-4"})})}),(0,a.jsx)(r.p4,{children:t})]})}function f(e){let{className:s,...t}=e;return(0,a.jsx)(r.PP,{"data-slot":"select-scroll-up-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(i.A,{className:"size-4"})})}function h(e){let{className:s,...t}=e;return(0,a.jsx)(r.wn,{"data-slot":"select-scroll-down-button",className:(0,o.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(l.A,{className:"size-4"})})}}},e=>{e.O(0,[6399,9994,4878,9690,4390,3498,9641,5702,5100,5452,6671,3207,3464,371,5299,6055,154,193,4305,8441,5964,7358],()=>e(e.s=33963)),_N_E=e.O()}]);